import { AzureFunction, Context, HttpRequest } from "@azure/functions"

const httpTrigger: AzureFunction = async function (context: Context, req: HttpRequest): Promise<void> {
    context.log('HTTP trigger function processed a request.');
    const name = (req.query.name || (req.body && req.body.name));
    const responseMessage = name
        ? `{"name":"david","id":"c2030","termsAndConditionsURL":"","registerSchema":{"required":["email"],"type":"object","properties":{"name":{"maxLength":255,"minLength":0,"order":"0","errorMessage":"Name should have length below 255","type":"string"},"email":{"order":"1","type":"string","format":"email","errorMessage":"Please provide a valid email"}}},"privacyPolicyURL":"","services":[{"id":"test","name":"Test","icon":"","iconActive":"","serviceSchema":{"properties":{},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/test/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/test/unsubscribe"},{"id":"about_me","name":"About Me","icon":"","iconActive":"","serviceSchema":{"properties":{"Date Of Birth":{"errorMessage":"Invalid input","maxLength":100,"minLength":1,"order":4,"placeholder":"Date Of Birth","type":"string"},"Email":{"errorMessage":"Invalid input","maxLength":100,"minLength":1,"order":0,"placeholder":"Email","type":"string"},"Legal Name":{"errorMessage":"Invalid input","maxLength":100,"minLength":1,"order":3,"placeholder":"Legal Name","type":"string"},"Phone Number":{"errorMessage":"Invalid input","maxLength":100,"minLength":1,"order":1,"placeholder":"Phone Number","type":"string"},"Profile Pic":{"errorMessage":"Invalid input","maxLength":100,"minLength":1,"order":2,"placeholder":"Profile Pic","type":"string"}},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/about_me/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/about_me/unsubscribe"},{"id":"passport","name":"Passport","icon":"","iconActive":"","serviceSchema":{"properties":{"passport":{"_format":"image","errorMessage":"Invalid input","order":0,"placeholder":"passport","type":"string"},"selfie":{"_format":"face","errorMessage":"Invalid input","order":1,"placeholder":"selfie","type":"string"}},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/passport/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/passport/unsubscribe"},{"id":"credentials","name":"credentials","icon":"","iconActive":"","serviceSchema":{"properties":{},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/credentials/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/credentials/unsubscribe"},{"id":"kyc","name":"kyc","icon":"","iconActive":"","serviceSchema":{"properties":{},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/kyc/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/kyc/unsubscribe"},{"id":"nsw_driver_licence","name":"NSW Driver Licence","icon":"","iconActive":"","serviceSchema":{"properties":{},"required":[],"type":"object"},"status":"","subscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/nsw_driver_licence/subscribe","unsubscribeURL":"https://svc-c2030.au-east1-az.staging.trustgrid.com/service/nsw_driver_licence/unsubscribe"}]}`
        : `{"name":"unknown"}`;

    context.res = {
        // status: 200, /* Defaults to 200 */
        body: responseMessage
    };

};

export default httpTrigger;